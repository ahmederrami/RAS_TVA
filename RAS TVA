@startuml
title Retenue A la Source (RAS) sur TVA
skinparam {
    defaultFontColor black
    defaultFontSize 14
    defaultTextAlignment center
    rectangle {
        BackgroundColor White
        FontColor Black
        BorderColor Black
    }
    activity {
        BackgroundColor White
        BorderColor Black
    }
}

start

if (type d'opération objet\n de la facture ?) then (Travaux / Equipement)
  if (Attestation de régularité\n conforme ?) then (Oui)
    :<back:lightgreen>Pas de RAS sur TVA;
    stop
  else (Non)
    :<back:lightcoral>RAS 100% sur TVA;
    stop
  endif
else (Prestation)
  if (montant facture < 5000 dh TTC et total\n fournisseur du mois < 50000 dh TTC?) then (Oui)
    :<back:lightgreen>Pas de RAS sur TVA;
    stop
  else (Non)
    if (Prestation soumise à\n la RAS sur TVA ?) then (Oui)
      goto decision_attestation
    else (Non)
      :<back:lightgreen>Pas de RAS sur TVA;
      stop
    endif
  endif
endif

label decision_attestation
if (Attestation de régularité\n conforme ?) then (Oui)
  :<back:lightyellow>RAS 75% sur TVA;
else (Non)
  :<back:lightcoral>RAS 100% sur TVA;
endif
stop

@enduml
